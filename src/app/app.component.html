<p-toast></p-toast>
<pre *ngIf="load">{{editForm.value | json}}</pre>

<div *ngIf="load" class="card">
  <h5>Row Editing</h5>
  <form [formGroup]="editForm">
    <div formArrayName="fields">
      <p-button (click)="addNewRow()" label="Add New"></p-button>
      <p-table [value]="products2">
        <ng-template pTemplate="header">
          <tr>
            <th>Code</th>
            <th>Category</th>
            <th>Name</th>
            <th>Quantity</th>
            <th style="width:8rem"></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-editing="editing" let-ri="rowIndex">
          <tr [pEditableRow]="product" [formGroupName]="ri">
            <td>
              <!-- <p-cellEditor>
            <ng-template pTemplate="input"> -->
              <input pInputText type="text" formControlName="code" [(ngModel)]="product.code">
              <!-- </ng-template>
            <ng-template pTemplate="output">
              {{product.code}}
            </ng-template>
          </p-cellEditor> -->
            </td>
            <td>
              <!-- <p-cellEditor>
            <ng-template pTemplate="input"> -->
              <p-dropdown [options]="statuses" formControlName="inventoryStatus" [(ngModel)]="product.inventoryStatus"
                [style]="{'width':'100%'}">
              </p-dropdown>
              <!-- </ng-template>
            <ng-template pTemplate="output">
              {{product.inventoryStatus}}
            </ng-template>
          </p-cellEditor> -->
            </td>
            <td>
              <!-- <p-cellEditor>
            <ng-template pTemplate="input"> -->
              <input pInputText type="text" formControlName="name" [(ngModel)]="product.name" >
              <!-- </ng-template>
            <ng-template pTemplate="output">
              {{product.name}}
            </ng-template>
          </p-cellEditor> -->
            </td>

            <td>
              <!-- <p-cellEditor>
            <ng-template pTemplate="input"> -->
              <input pInputText type="text" formControlName="price" [(ngModel)]="product.price">
              <!-- </ng-template>
            <ng-template pTemplate="output">
              {{product.price | currency: 'USD'}}
            </ng-template>
          </p-cellEditor> -->
            </td>
            <td style="text-align:center">
              <!-- <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(product)" class="p-button-rounded p-button-text"></button>
          <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(product)" class="p-button-rounded p-button-text p-button-success p-mr-2"></button>  -->
              <button pButton pRipple type="button" icon="pi pi-times" (click)="removeFields(ri)" class="p-button-rounded p-button-text p-button-danger"></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    <p-button [disabled]="!editForm.valid" (click)="onSubmit()" label="Submit"></p-button>
  </form>
</div>